RewriteEngine On
RewriteBase /

# Handle Front Controller Pattern for SPA
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [L]

# Prevent directory listing
Options -Indexes

# Set default index file
DirectoryIndex index.html

# Reduce caching issues on shared hosts/CDNs:
# - Always revalidate HTML so updates appear immediately
# - Allow hashed assets (Vite) to be cached long-term
<IfModule mod_headers.c>
  <FilesMatch "\.(html)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>

  <FilesMatch "\.(js|css|png|jpg|jpeg|gif|svg|webp|avif|ico|woff2?)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>
